pipeline {
    agent {
        label 'QA'
    }
    stages {
        stage('for main branch') {
            when {
                branch 'main'
            }
            steps {
                echo 'main branch is good'
                echo "Change ID: ${env.CHANGE_ID}"
            }
        }
        stage('for stage branch') {
            when {
                branch 'dev'
            }
            steps {
                echo 'dev branch is not good'
                echo "Change ID: ${env.CHANGE_ID}"
            }
        }
        stage('for pull request via PR-*') {
            when {
                expression {
                    env.CHANGE_ID != null
                }
            }
            steps {
                echo 'pull request via PR-*'
                echo "Change ID: ${env.CHANGE_ID}"
            }
        }
        stage('for pull request via changeRequest') {
            when {
                changeRequest()
            }
            steps {
                echo 'pull request via changeRequest'
                echo "Change ID: ${env.CHANGE_ID}"
            }
        }
    }
}
